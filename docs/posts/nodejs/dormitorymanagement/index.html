<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>学生宿舍管理系统 | 项目介绍</title>
<meta name="keywords" content="nodejs, Koa, 学生, 宿舍管理">
<meta name="description" content="一个基于基于 nodejs Koa框架，以及 VueJS 的学生宿舍管理系统。">
<meta name="author" content="admin">
<link rel="canonical" href="https://steamdk.github.io/posts/nodejs/dormitorymanagement/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7e761da024b8f185a53400f408c8477b4480fcf93480de5ce4564cb5b111271b.css" integrity="sha256-fnYdoCS48YWlNAD0CMhHe0SA/Pk0gN5c5FZMtbERJxs=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://steamdk.github.io/favicon.svg">
<link rel="icon" type="image/png" sizes="16x16" href="https://steamdk.github.io/favicon.svg">
<link rel="icon" type="image/png" sizes="32x32" href="https://steamdk.github.io/favicon.svg">
<link rel="apple-touch-icon" href="https://steamdk.github.io/favicon.svg">
<link rel="mask-icon" href="https://steamdk.github.io/favicon.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh" href="https://steamdk.github.io/posts/nodejs/dormitorymanagement/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">





<script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style><meta property="og:url" content="https://steamdk.github.io/posts/nodejs/dormitorymanagement/">
  <meta property="og:site_name" content="项目介绍">
  <meta property="og:title" content="学生宿舍管理系统">
  <meta property="og:description" content="一个基于基于 nodejs Koa框架，以及 VueJS 的学生宿舍管理系统。">
  <meta property="og:locale" content="zh">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-18T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-18T00:00:00+00:00">
    <meta property="article:tag" content="案例">
    <meta property="article:tag" content="Nodejs">
    <meta property="article:tag" content="宿舍管理">
    <meta property="og:image" content="https://steamdk.github.io/posts/nodejs/DormitoryManagement/images/0.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://steamdk.github.io/posts/nodejs/DormitoryManagement/images/0.png">
<meta name="twitter:title" content="学生宿舍管理系统">
<meta name="twitter:description" content="一个基于基于 nodejs Koa框架，以及 VueJS 的学生宿舍管理系统。">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://steamdk.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "学生宿舍管理系统",
      "item": "https://steamdk.github.io/posts/nodejs/dormitorymanagement/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "学生宿舍管理系统",
  "name": "学生宿舍管理系统",
  "description": "一个基于基于 nodejs Koa框架，以及 VueJS 的学生宿舍管理系统。",
  "keywords": [
    "nodejs", "Koa", "学生", "宿舍管理"
  ],
  "articleBody": "0. 概览 基于 Koa 以及 VueJS 的宿舍管理系统。\n更新记录： 2023.05.09 新增功能：\n【楼层管理】添加『入住人员信息』模块，显示入住学生、性别、院系、专业的人数，可用饼图表示 【用户信息】学生用户添加性别、院系、专业字段 【楼层管理】每层楼显示空余床位和已入住人数 【宿舍信息】宿舍信息显示空余床位，新增修改床位数的功能 【学生信息】如果是超级管理员，会有『更换寝室』按钮，可以修改学生宿舍 【管理员系统】新增『来访人员登记』模块，可以添加来访人员记录，仅提供新增功能，记录信息包含姓名、电话号、身份证、性别等，登记日期自动生成 代码：\n支持使用环境变量修改服务端配置，将 server/.env.template 重命名为 .env 文件即可应用配置 升级 Vue 版本为 2.7 升级 echarts，移除 v-charts，使用 vue-echarts 作为 Vue 图表组件 新增 npm run db:init 指令，快捷初始化数据库 1. 需求分析 主要需求：\n学生信息录入、修改、删除、查询 宿舍管理评分 学生早起率、懒床率 学生宿舍打扫频率 学生晚归情况 楼层管理 考虑到实用性，该系统需要拆分为两大子系统，一个是学生端系统，一个是后台管理端系统。学生端系统主要提供给学生使用，负责一些宿舍记录及个人信息记录的基本操作；后台管理模块则是主要负责对所有学生信息的整理，提供宿舍管理、楼层管理、数据查看等权限，提供给宿舍管理员使用的。\n1.1 学生系统 学生系统拥有以下功能：\n创建账户 分配宿舍 填写个人信息 修改个人信息 起床打卡（用于统计懒床率） 归宿登记（用于统计晚归情况） 打扫记录（用于统计宿舍打扫频率） 查看宿日常数据 1.2 管理系统 管理系统拥有以下功能：\n楼层管理 宿舍评价 宿舍信息管理 学生信息查看 保洁人员管理 统计学生早起率 统计学生宿舍打扫频率 统计学生晚归 超级管理员在享有上述管理员同等权限的同时额外拥有如下功能：\n创建管理员 创建宿舍楼 为宿舍楼分配管理员 为宿舍楼分配保洁人员 3. 技术分析 前端：\nVue 作为基础框架 vue-router 控制路由（hash 模式） vuex 状态管理 axios 接入数据 Vue-element-admin 作为基础框架 后台（Nodejs）：\nKoa 作为基础框架 koa-router —— 服务端路由控制 koa-static —— 读取静态文件 koa-jwt —— JWT 登录校验 koa-body —— http body 数据处理 koa-compress —— Gzip 压缩 koa-cors —— CORS 解决跨域问题 sequelize —— ORM 数据库：\nMySQL 数据库设计一览：\n4. 目录介绍 clinet 目录下为前端的项目文件， server 为后台目录下的文件\n4.1 Clinet 目录 4.1.1 根目录 public :\nHTML 模板和静态资源，参考 vue-cli 官方文档\nsrc :\n源码目录\n.eslint* :\nEslint 代码规范规则相关\n.prettierrc.js :\nPrettier 代码格式化相关\nvue.config.js :\nwebpack 规则，无需修改\n4.1.2 src 源码目录（重点） api：\n抽离出的单独的请求文件，请求后台的 url\nassets：\n前端的静态文件资源\ncomponents：\n前端的页面的组件，重点组件有：\nGroupSelector：级联选择器组件 RecordTable：记录表格组件 RoomSelector：房间级联选择器组件 filter：\nVue 过滤器，详见 Vue 官方文档\nicons：\nicon 图标文件\nlayout：\n最外层的整体布局组件\nrouter：\n前端路由系统，详见 Vue-Router 文档\nstore：\n前端状态管理系统，详见 Vuex 文档\nutils：\n页面中的某会被复用的方法，如计算日期、格式化日期的方法，会被抽离到 utils 中，再在各个页面中被引入\nviews（重点）：\n每个页面的代码都在这里\nApp.vue：\n最外层容器页面\nmain.js：\n入口文件\nsettings.js：\n配置文件（无需更改）\n4.2 server 目录 server 目录下的 static 文件为静态文件目录，前端 Vue 源码编译好之后会自动存放到 static 目录下。src 为源码目录，以下介绍为 src 目录下的文件：\napp.js：\n入口文件，所有的框架在此引入\nconfig.js：\n配置文件，除了数据库相关的文件，其余配置项不要更改\nutils：\n后台某些会被复用的方法，会被抽离到 utils 中，再在各个页面中被引入\nstruct：\n全局中新建的结构体（非重要，涉及 Javascript 面向对象设计）\nroutes：\n后台路由\nmodel：\n后台 Model 层（定义数据库表结构）\ndb：\n数据库连接与生成的方法\ncontroller：\n后台的 Controller 层\nmiddle：\nKoa 中间件，详见 Koa 中间件机制。\n5. 项目启用方式 预先准备 Node 环境，避免各种奇怪的问题，建议使用 16.x 版本，建议使用 volta 管理 node 版本。\n5.1 运行后台 数据库中创建表 “dormitory”（如下为 Navicat 数据库管理工具）：\n如果 mysql 低版本选择 utf8，高版本选择 utf8mb4\n复制 server/.env.template 重命名为 .env，修改相关配置。\n使用命令行工具移动至 server 目录下，运行：\n## 安装依赖 $ npm install ## 初始化数据库（该指令执行后会强行覆盖数据库中已有的数据，仅运行一次即可！） $ npm run db:init ## 运行项目 $ npm run start 看到以下输出，即为成功：\n浏览器访问 http://localhost:8080\n预置账号：\n管理员（admin 123456） 超级管理员（superAdmin 123456） 学生用户1（student1 123456） 学生用户2（student2 123456） 初始化的数据可以在 db_generator.js 中的 createDefaultData 方法中修改\n5.2 前端文件 按照上述步骤已经可以正常运行项目，如果需要修改与调试前端页面请按照以下步骤：\n首先要确保已经在 /clinet 目录下运行过 npm install 安装好了前端依赖\n在 /server 目录下运行 npm run dev 开启后台开发模式 在 /client 目录下运行 npm run dev 开启前端开发模式 修改 /clinet 目录下的任意文件 修改完成后，在 /client 目录下运行 npm run build:prod 构建时会出现警告，如 $weight: Passing a number without unit % (0) is deprecated. 无视即可，不影响功能\n6. API 文档 共计 32 个接口，接口文档：https://documenter.getpostman.com/view/6817046/SzKWuHJh\n",
  "wordCount" : "2127",
  "inLanguage": "zh",
  "image":"https://steamdk.github.io/posts/nodejs/DormitoryManagement/images/0.png","datePublished": "2024-11-18T00:00:00Z",
  "dateModified": "2024-11-18T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "admin"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://steamdk.github.io/posts/nodejs/dormitorymanagement/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "项目介绍",
    "logo": {
      "@type": "ImageObject",
      "url": "https://steamdk.github.io/favicon.svg"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://steamdk.github.io/" accesskey="h" title="项目介绍 (Alt + H)">项目介绍</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://steamdk.github.io/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="https://steamdk.github.io/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://steamdk.github.io/categories/" title="分类">
                    <span>分类</span>
                </a>
            </li>
            <li>
                <a href="https://steamdk.github.io/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://steamdk.github.io/search/" title="搜索">
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="https://steamdk.github.io/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      学生宿舍管理系统
    </h1>
    <div class="post-description">
      一个基于基于 nodejs Koa框架，以及 VueJS 的学生宿舍管理系统。
    </div>
    <div class="post-meta"><span title='2024-11-18 00:00:00 +0000 UTC'>2024-11-18</span>&nbsp;·&nbsp;5 分钟&nbsp;·&nbsp;admin

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#0-%e6%a6%82%e8%a7%88" aria-label="0. 概览">0. 概览</a><ul>
                        
                <li>
                    <a href="#%e6%9b%b4%e6%96%b0%e8%ae%b0%e5%bd%95" aria-label="更新记录：">更新记录：</a><ul>
                        
                <li>
                    <a href="#20230509" aria-label="2023.05.09">2023.05.09</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#1-%e9%9c%80%e6%b1%82%e5%88%86%e6%9e%90" aria-label="1. 需求分析">1. 需求分析</a><ul>
                        
                <li>
                    <a href="#11-%e5%ad%a6%e7%94%9f%e7%b3%bb%e7%bb%9f" aria-label="1.1 学生系统">1.1 学生系统</a></li>
                <li>
                    <a href="#12-%e7%ae%a1%e7%90%86%e7%b3%bb%e7%bb%9f" aria-label="1.2 管理系统">1.2 管理系统</a></li></ul>
                </li>
                <li>
                    <a href="#3-%e6%8a%80%e6%9c%af%e5%88%86%e6%9e%90" aria-label="3. 技术分析">3. 技术分析</a></li>
                <li>
                    <a href="#4-%e7%9b%ae%e5%bd%95%e4%bb%8b%e7%bb%8d" aria-label="4. 目录介绍">4. 目录介绍</a><ul>
                        
                <li>
                    <a href="#41-clinet-%e7%9b%ae%e5%bd%95" aria-label="4.1 Clinet 目录">4.1 Clinet 目录</a><ul>
                        
                <li>
                    <a href="#411-%e6%a0%b9%e7%9b%ae%e5%bd%95" aria-label="4.1.1 根目录">4.1.1 根目录</a></li>
                <li>
                    <a href="#412-src-%e6%ba%90%e7%a0%81%e7%9b%ae%e5%bd%95%e9%87%8d%e7%82%b9" aria-label="4.1.2 src 源码目录（重点）">4.1.2 src 源码目录（重点）</a></li></ul>
                </li>
                <li>
                    <a href="#42-server-%e7%9b%ae%e5%bd%95" aria-label="4.2 server 目录">4.2 server 目录</a></li></ul>
                </li>
                <li>
                    <a href="#5-%e9%a1%b9%e7%9b%ae%e5%90%af%e7%94%a8%e6%96%b9%e5%bc%8f" aria-label="5. 项目启用方式">5. 项目启用方式</a><ul>
                        
                <li>
                    <a href="#51-%e8%bf%90%e8%a1%8c%e5%90%8e%e5%8f%b0" aria-label="5.1 运行后台">5.1 运行后台</a></li>
                <li>
                    <a href="#52-%e5%89%8d%e7%ab%af%e6%96%87%e4%bb%b6" aria-label="5.2 前端文件">5.2 前端文件</a></li></ul>
                </li>
                <li>
                    <a href="#6-api-%e6%96%87%e6%a1%a3" aria-label="6. API 文档">6. API 文档</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="0-概览">0. 概览<a hidden class="anchor" aria-hidden="true" href="#0-概览">#</a></h1>
<p>基于 Koa 以及 VueJS 的宿舍管理系统。</p>
<p><img loading="lazy" src="/posts/nodejs/dormitorymanagement/images/0.png"></p>
<p><img loading="lazy" src="/posts/nodejs/dormitorymanagement/images/screen-shot_02.png"></p>
<p><img loading="lazy" src="/posts/nodejs/dormitorymanagement/images/screen-shot_03.png"></p>
<p><img loading="lazy" src="/posts/nodejs/dormitorymanagement/images/screen-shot_04.png"></p>
<h2 id="更新记录">更新记录：<a hidden class="anchor" aria-hidden="true" href="#更新记录">#</a></h2>
<h3 id="20230509">2023.05.09<a hidden class="anchor" aria-hidden="true" href="#20230509">#</a></h3>
<p>新增功能：</p>
<ul>
<li>【楼层管理】添加『入住人员信息』模块，显示入住学生、性别、院系、专业的人数，可用饼图表示</li>
<li>【用户信息】学生用户添加性别、院系、专业字段</li>
<li>【楼层管理】每层楼显示空余床位和已入住人数</li>
<li>【宿舍信息】宿舍信息显示空余床位，新增修改床位数的功能</li>
<li>【学生信息】如果是超级管理员，会有『更换寝室』按钮，可以修改学生宿舍</li>
<li>【管理员系统】新增『来访人员登记』模块，可以添加来访人员记录，仅提供新增功能，记录信息包含姓名、电话号、身份证、性别等，登记日期自动生成</li>
</ul>
<p>代码：</p>
<ul>
<li>支持使用环境变量修改服务端配置，将 <code>server/.env.template</code> 重命名为 <code>.env</code> 文件即可应用配置</li>
<li>升级 Vue 版本为 2.7</li>
<li>升级 echarts，移除 v-charts，使用 vue-echarts 作为 Vue 图表组件</li>
<li>新增 <code>npm run db:init</code> 指令，快捷初始化数据库</li>
</ul>
<h1 id="1-需求分析">1. 需求分析<a hidden class="anchor" aria-hidden="true" href="#1-需求分析">#</a></h1>
<p>主要需求：</p>
<ul>
<li>学生信息录入、修改、删除、查询</li>
<li>宿舍管理评分</li>
<li>学生早起率、懒床率</li>
<li>学生宿舍打扫频率</li>
<li>学生晚归情况</li>
<li>楼层管理</li>
</ul>
<p>考虑到实用性，该系统需要拆分为两大子系统，一个是学生端系统，一个是后台管理端系统。学生端系统主要提供给学生使用，负责一些宿舍记录及个人信息记录的基本操作；后台管理模块则是主要负责对所有学生信息的整理，提供宿舍管理、楼层管理、数据查看等权限，提供给宿舍管理员使用的。</p>
<h2 id="11-学生系统">1.1 学生系统<a hidden class="anchor" aria-hidden="true" href="#11-学生系统">#</a></h2>
<p>学生系统拥有以下功能：</p>
<ul>
<li>创建账户</li>
<li>分配宿舍</li>
<li>填写个人信息</li>
<li>修改个人信息</li>
<li>起床打卡（用于统计懒床率）</li>
<li>归宿登记（用于统计晚归情况）</li>
<li>打扫记录（用于统计宿舍打扫频率）</li>
<li>查看宿日常数据</li>
</ul>
<h2 id="12-管理系统">1.2 管理系统<a hidden class="anchor" aria-hidden="true" href="#12-管理系统">#</a></h2>
<p>管理系统拥有以下功能：</p>
<ul>
<li>楼层管理</li>
<li>宿舍评价</li>
<li>宿舍信息管理</li>
<li>学生信息查看</li>
<li>保洁人员管理</li>
<li>统计学生早起率</li>
<li>统计学生宿舍打扫频率</li>
<li>统计学生晚归</li>
</ul>
<p>超级管理员在享有上述管理员同等权限的同时额外拥有如下功能：</p>
<ul>
<li>创建管理员</li>
<li>创建宿舍楼</li>
<li>为宿舍楼分配管理员</li>
<li>为宿舍楼分配保洁人员</li>
</ul>
<h1 id="3-技术分析">3. 技术分析<a hidden class="anchor" aria-hidden="true" href="#3-技术分析">#</a></h1>
<p>前端：</p>
<ul>
<li>Vue 作为基础框架</li>
<li>vue-router 控制路由（hash 模式）</li>
<li>vuex 状态管理</li>
<li>axios 接入数据</li>
<li><a href="https://github.com/PanJiaChen/vue-element-admin">Vue-element-admin</a> 作为基础框架</li>
</ul>
<p>后台（Nodejs）：</p>
<ul>
<li>Koa 作为基础框架</li>
<li>koa-router —— 服务端路由控制</li>
<li>koa-static —— 读取静态文件</li>
<li>koa-jwt —— JWT 登录校验</li>
<li>koa-body —— http body 数据处理</li>
<li>koa-compress —— Gzip 压缩</li>
<li>koa-cors —— CORS 解决跨域问题</li>
<li>sequelize —— ORM</li>
</ul>
<p>数据库：</p>
<ul>
<li>MySQL</li>
</ul>
<p>数据库设计一览：</p>
<p><img loading="lazy" src="/posts/nodejs/dormitorymanagement/images/db-design.png"></p>
<h1 id="4-目录介绍">4. 目录介绍<a hidden class="anchor" aria-hidden="true" href="#4-目录介绍">#</a></h1>
<p>clinet 目录下为前端的项目文件， server 为后台目录下的文件</p>
<h2 id="41-clinet-目录">4.1 Clinet 目录<a hidden class="anchor" aria-hidden="true" href="#41-clinet-目录">#</a></h2>
<h3 id="411-根目录">4.1.1 根目录<a hidden class="anchor" aria-hidden="true" href="#411-根目录">#</a></h3>
<p><strong>public :</strong></p>
<p>HTML 模板和静态资源，参考 <a href="https://cli.vuejs.org/zh/guide/html-and-static-assets.html">vue-cli 官方文档</a></p>
<p><strong>src :</strong></p>
<p>源码目录</p>
<p><strong>.eslint* :</strong></p>
<p>Eslint 代码规范规则相关</p>
<p><strong>.prettierrc.js :</strong></p>
<p>Prettier 代码格式化相关</p>
<p><strong>vue.config.js :</strong></p>
<p>webpack 规则，无需修改</p>
<h3 id="412-src-源码目录重点">4.1.2 src 源码目录（重点）<a hidden class="anchor" aria-hidden="true" href="#412-src-源码目录重点">#</a></h3>
<p><strong>api：</strong></p>
<p>抽离出的单独的请求文件，请求后台的 url</p>
<p><strong>assets：</strong></p>
<p>前端的静态文件资源</p>
<p><strong>components：</strong></p>
<p>前端的页面的组件，重点组件有：</p>
<ul>
<li>GroupSelector：级联选择器组件</li>
<li>RecordTable：记录表格组件</li>
<li>RoomSelector：房间级联选择器组件</li>
</ul>
<p><strong>filter：</strong></p>
<p>Vue 过滤器，详见 <a href="https://cn.vuejs.org/v2/guide/filters.html">Vue 官方文档</a></p>
<p><strong>icons：</strong></p>
<p>icon 图标文件</p>
<p><strong>layout：</strong></p>
<p>最外层的整体布局组件</p>
<p><strong>router：</strong></p>
<p>前端路由系统，详见 Vue-Router 文档</p>
<p><strong>store：</strong></p>
<p>前端状态管理系统，详见 Vuex 文档</p>
<p><strong>utils：</strong></p>
<p>页面中的某会被复用的方法，如计算日期、格式化日期的方法，会被抽离到 utils 中，再在各个页面中被引入</p>
<p><strong>views（重点）：</strong></p>
<p>每个页面的代码都在这里</p>
<p><strong>App.vue：</strong></p>
<p>最外层容器页面</p>
<p><strong>main.js：</strong></p>
<p>入口文件</p>
<p><strong>settings.js：</strong></p>
<p>配置文件（无需更改）</p>
<h2 id="42-server-目录">4.2 server 目录<a hidden class="anchor" aria-hidden="true" href="#42-server-目录">#</a></h2>
<p>server 目录下的 static 文件为静态文件目录，前端 Vue 源码编译好之后会自动存放到 static 目录下。src 为源码目录，以下介绍为 src 目录下的文件：</p>
<p><strong>app.js：</strong></p>
<p>入口文件，所有的框架在此引入</p>
<p><strong>config.js：</strong></p>
<p>配置文件，除了数据库相关的文件，其余配置项不要更改</p>
<p><strong>utils：</strong></p>
<p>后台某些会被复用的方法，会被抽离到 utils 中，再在各个页面中被引入</p>
<p><strong>struct：</strong></p>
<p>全局中新建的结构体（非重要，涉及 Javascript 面向对象设计）</p>
<p><strong>routes：</strong></p>
<p>后台路由</p>
<p><strong>model：</strong></p>
<p>后台 Model 层（定义数据库表结构）</p>
<p><strong>db：</strong></p>
<p>数据库连接与生成的方法</p>
<p><strong>controller：</strong></p>
<p>后台的 Controller 层</p>
<p><strong>middle：</strong></p>
<p>Koa 中间件，详见 Koa 中间件机制。</p>
<h1 id="5-项目启用方式">5. 项目启用方式<a hidden class="anchor" aria-hidden="true" href="#5-项目启用方式">#</a></h1>
<p>预先准备 Node 环境，<strong>避免各种奇怪的问题，建议使用 16.x 版本</strong>，建议<a href="https://blog.esunr.xyz/2023/07/d99593770741.html#1-Volta">使用 volta 管理 node 版本</a>。</p>
<h2 id="51-运行后台">5.1 运行后台<a hidden class="anchor" aria-hidden="true" href="#51-运行后台">#</a></h2>
<p>数据库中创建表 &ldquo;dormitory&rdquo;（如下为 Navicat 数据库管理工具）：</p>
<p><img loading="lazy" src="/posts/nodejs/dormitorymanagement/images/db.png"></p>
<blockquote>
<p>如果 mysql 低版本选择 utf8，高版本选择 utf8mb4</p>
</blockquote>
<p>复制 <code>server/.env.template</code> 重命名为 <code>.env</code>，修改相关配置。</p>
<p>使用命令行工具移动至 server 目录下，运行：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="err">##</span> <span class="nx">安装依赖</span>
</span></span><span class="line"><span class="cl"><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">##</span> <span class="nx">初始化数据库</span><span class="err">（</span><span class="nx">该指令执行后会强行覆盖数据库中已有的数据</span><span class="err">，</span><span class="nx">仅运行一次即可</span><span class="err">！）</span>
</span></span><span class="line"><span class="cl"><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">run</span> <span class="nx">db</span><span class="o">:</span><span class="nx">init</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">##</span> <span class="nx">运行项目</span>
</span></span><span class="line"><span class="cl"><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">run</span> <span class="nx">start</span>
</span></span></code></pre></div><p>看到以下输出，即为成功：</p>
<p><img loading="lazy" src="/posts/nodejs/dormitorymanagement/images/server-start.png"></p>
<p>浏览器访问 <code>http://localhost:8080</code></p>
<p>预置账号：</p>
<ul>
<li>管理员（admin 123456）</li>
<li>超级管理员（superAdmin 123456）</li>
<li>学生用户1（student1 123456）</li>
<li>学生用户2（student2 123456）</li>
</ul>
<blockquote>
<p>初始化的数据可以在 <code>db_generator.js</code> 中的 <code>createDefaultData</code> 方法中修改</p>
</blockquote>
<h2 id="52-前端文件">5.2 前端文件<a hidden class="anchor" aria-hidden="true" href="#52-前端文件">#</a></h2>
<p>按照上述步骤已经可以正常运行项目，如果需要修改与调试前端页面请按照以下步骤：</p>
<blockquote>
<p>首先要确保已经在 <code>/clinet</code> 目录下运行过 <code>npm install</code> 安装好了前端依赖</p>
</blockquote>
<ol>
<li>在 <code>/server</code> 目录下运行 <code>npm run dev</code> 开启后台开发模式</li>
<li>在 <code>/client</code> 目录下运行 <code>npm run dev</code> 开启前端开发模式</li>
<li>修改 <code>/clinet</code> 目录下的任意文件</li>
<li>修改完成后，在 <code>/client</code> 目录下运行 <code>npm run build:prod</code></li>
</ol>
<blockquote>
<p>构建时会出现警告，如 <code>$weight: Passing a number without unit % (0) is deprecated.</code> 无视即可，不影响功能</p>
</blockquote>
<h1 id="6-api-文档">6. API 文档<a hidden class="anchor" aria-hidden="true" href="#6-api-文档">#</a></h1>
<p>共计 32 个接口，接口文档：https://documenter.getpostman.com/view/6817046/SzKWuHJh</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://steamdk.github.io/tags/%E6%A1%88%E4%BE%8B/">案例</a></li>
      <li><a href="https://steamdk.github.io/tags/nodejs/">Nodejs</a></li>
      <li><a href="https://steamdk.github.io/tags/%E5%AE%BF%E8%88%8D%E7%AE%A1%E7%90%86/">宿舍管理</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://steamdk.github.io/posts/golang/admin/">
    <span class="title">« 上一页</span>
    <br>
    <span>后台管理</span>
  </a>
  <a class="next" href="https://steamdk.github.io/posts/phaser/aether/">
    <span class="title">下一页 »</span>
    <br>
    <span>RPG闯关游戏</span>
  </a>
</nav>

  </footer><div id="tw-comment"></div>
<script>
    
    const getStoredTheme = () => localStorage.getItem("pref-theme") === "light" ? "light" : "dark";
    const setGiscusTheme = () => {
        const sendMessage = (message) => {
            const iframe = document.querySelector('iframe.giscus-frame');
            if (iframe) {
                iframe.contentWindow.postMessage({giscus: message}, 'https://giscus.app');
            }
        }
        sendMessage({setConfig: {theme: getStoredTheme()}})
    }

    document.addEventListener("DOMContentLoaded", () => {
        const giscusAttributes = {
            "src": "https://giscus.app/client.js",
            "data-repo": "steamdk\/steamdk.github.io",
            "data-repo-id": "R_kgDONN_Y2g",
            "data-category": "Announcements",
            "data-category-id": "DIC_kwDONN_Y2s4CkVh9",
            "data-mapping": "pathname",
            "data-strict": "0",
            "data-reactions-enabled": "1",
            "data-emit-metadata": "0",
            "data-input-position": "bottom",
            "data-theme": getStoredTheme(),
            "data-lang": "zh-CN",
            "data-loading": "lazy",
            "crossorigin": "anonymous",
        };

        
        const giscusScript = document.createElement("script");
        Object.entries(giscusAttributes).forEach(
                ([key, value]) => giscusScript.setAttribute(key, value));
        document.querySelector("#tw-comment").appendChild(giscusScript);

        
        const themeSwitcher = document.querySelector("#theme-toggle");
        if (themeSwitcher) {
            themeSwitcher.addEventListener("click", setGiscusTheme);
        }
        const themeFloatSwitcher = document.querySelector("#theme-toggle-float");
        if (themeFloatSwitcher) {
            themeFloatSwitcher.addEventListener("click", setGiscusTheme);
        }
    });
</script>
</article>
    </main>
    
<footer class="footer">
        <span><a href="https://steamdk.github.io">©2024 项目介绍</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>


<script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js"
  integrity="sha512-9ZKhgaFdKlsELap/dGw3Iaz5Bj+Las0XXZiRKYZaN9QArg6FtkD5rULNmNH4rTCTFxjPiBGr3MX8smRADRorDA=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  var OSName = "unknown";
  var navApp = navigator.userAgent.toLowerCase();
  switch (true) {
    case (navApp.indexOf("win") != -1):
      OSName = "windows";
      break;
    case (navApp.indexOf("mac") != -1):
      OSName = "apple";
      break;
    case (navApp.indexOf("linux") != -1):
      OSName = "linux";
      break;
    case (navApp.indexOf("x11") != -1):
      OSName = "unix";
      break;
  }

  const images = Array.from(document.querySelectorAll(".post-content img"));
  images.forEach(img => {
    mediumZoom(img, {
      margin: 1,    
      
      container: null,  
      template: null,  
      
    });
  });

  if (OSName == "windows") {
    document.body.className += ' win11'
  }
</script>






<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '复制';

        function copyingDone() {
            copybutton.innerHTML = '已复制！';
            setTimeout(() => {
                copybutton.innerHTML = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
